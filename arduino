#include <Keyboard.h>  // Include the Keyboard library
bool botActive = false;

void setup() {
  Serial.begin(9600);
  while (!Serial);  // Wait for serial connection (only needed for boards like Leonardo/Micro)
  Serial.println("Waiting for 'start' or 'stop' commands...");
  // Start the keyboard library
  Keyboard.begin();
  
}

void loop() {
  // Check for commands from the Python script
  if (Serial.available()) {
    String cmd = Serial.readStringUntil('\n');
    cmd.trim();

    if (cmd == "start") {
      botActive = true;
      Serial.println("Bot started.");
    } else if (cmd == "stop") {
      botActive = false;
      Serial.println("Bot stopped.");
    } else if (cmd == "exit") {
      // Special exit command to stop Arduino
      botActive = false;
      Serial.println("Bot stopped due to 'exit' command.");
    }
  }

  // If the bot is active, run bot logic
  if (botActive) {
    Serial.println("Running...");
    delay(500);  // Simulate bot activity

    Keyboard.press('w');
    delay(100); // Hold the 'a' key for 100 ms
    Keyboard.release('w'); // Release the 'a' key
    delay(500);  // Simulate bot activity
  }
}
